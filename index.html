<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Visibility from Meteosource</title>
</head>
<body>
  <h1>Current Visibility</h1>
  <div id="visibility">Loading...</div>

  <script>
    const apiKey = 'mpwturrttqmcb4ax95xo94feri15h24bzcj6736m';
    const lat = '40.7128';   // Example: New York latitude
    const lon = '-74.0060';  // Example: New York longitude

    const url = `https://www.meteosource.com/api/v1/free/point?lat=${lat}&lon=${lon}&sections=current&units=metric&language=en&key=${apiKey}`;

    fetch(url)
      .then(response => {
        if (!response.ok) throw new Error('Network response was not ok');
        return response.json();
      })
      .then(data => {
        const visibility = data.current.visibility; // Visibility in meters
        document.getElementById('visibility').textContent = `Visibility: ${visibility} meters`;
      })
      .catch(error => {
        document.getElementById('visibility').textContent = `Error fetching data: ${error.message}`;
      });
  </script>
</body>
</html>
